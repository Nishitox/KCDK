# はじめに

KCDK開発者用の忘備録&情報共有テキストです。導入方法や使い方は同ディレクトリの「_README.pdf」を参照ください。

# KCDKの命名規則

* KCDKで使われるファイル名および変数名の単語の区切りには、空白の代わりにスネークケースを使用します。　例：hoge_piyo.mcfunction

* スコアボードオブジェクト，タグ，ボスバーなどの名前には、他のデータパックとの干渉を避けるために、名前の先頭に「kcdk.」を付けた、『kcdk.〈任意の名前〉』という表記を使用します。拡張機能の場合は「kcdkp.」とします。　例：kcdk.hogehoge



# KCDKで使用される一部の変数のルールについて

バグや干渉を減らし、安全に管理するために以下の規則に従ってください。

1. **kcdk.controlのreturn変数**
   * return変数はfunction専用の汎用変数です。汎用変数とは、様々な用途で使うことのできる変数のことを指します。
   * 関数は〈data/kcdk/functions/score/return/〉に配置してください。ファイルの煩雑化を避けるために、配置する場所を限定しています。なお、限定されるのはreturn変数に値を格納するための関数であり、それらを呼び出す関数にフォルダの指定はありません。例えば、プレイヤーの人数をreturn変数に格納する関数はreturnフォルダに配置しますが、それを呼び出す関数をreturnフォルダに配置する必要はありません。
   * 前回return変数に格納された値は、必ず関数内で初期化または上書きされるようにしてください。これは古い値が処理に影響を与えてしまうのを防ぐためです。
   * return変数を用いる関数は呼び出しから値の読み取りまでを同じtick内で処理しなければいけません。tickを跨いでしまうと、意図しない関数が値に干渉できてしまうためです。例えば、プレイヤーの人数をreturn変数に格納する関数と、それを呼び出す関数は同じtick内に処理しなければいけません。
2. **kcdk.controlのtmp変数**
   * tmp変数は汎用変数です。return変数より制限が緩く、フォルダの指定はありませんが、処理の主題がスコアボードである場合は〈data/kcdk/functions/score/〉に配置するべきです。
   * return変数同様、前回変数に格納された値は、必ず関数内で初期化または上書きされるようにしてください。またtmp変数を用いる関数は呼び出しから値の読み取りまでを同じtick内で処理しなければいけません。
3. **kcdk.controlのarg変数**
   * arg変数はfunction専用の汎用変数です。引数として呼び出す側と呼び出される側の両方の関数に使われます。フォルダの指定はありませんが、処理の主題がスコアボードである場合は〈data/kcdk/functions/score/〉に配置するべきです。
   * return変数同様、前回変数に格納された値は、必ず関数内で初期化または上書きされるようにしてください。またarg変数を用いる関数は呼び出しから値の読み取りまでを同じtick内で処理しなければいけません。
4. **kcdk.buttonスコアボードオブジェクト**
   * kcdk.buttonは0番から29番までを一般的な使用のために予約しています。したがって、基本機能及び拡張機能が上記の番号を利用することはできないものとします。



# KCDKの更新毎に変更が必要な個所

* 本データパックをVSCodeなどのテキストエディタでワークスペースとして開き、検索で`@ANCHOR: KCDK-VERSION`と入力し、該当するファイル内に記述されているバージョン名を最新に変更してください。

* `data/kcdk/functions/plugin/kcdkm/reply/<version-name>.mcfunction`及び`data/kcdk/structures:<version-name>.nbt`のファイル名を最新のバージョン名に変更してください。

* KCDK本体の看板に記されているバージョン名を最新に変更してください。
